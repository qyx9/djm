(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/productmess/productmess"],{"061d":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o("340c"),a=n(o("504f")),i=n(o("a8c4"));function n(t){return t&&t.__esModule?t:{default:t}}function d(t){var e=new Date(1e3*t),o=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",i=e.getHours()+":",n=e.getMinutes()+":",d=e.getSeconds();return o+s+a+i+n+d}var r={components:{GoodFlex:a.default,LoadMore:i.default},data:function(){return{data:[],bannerdata:[],dataurl:"",appid:"",pathges:"",loding:!1,zongscore:"",look:!1,serpct:"",descpct:"",lgstpct:"",bannerShow:!1,prGoodId:"",UserId:"",messopid:"",dataState:"",flexblean:!1,pages:1,showloadMore:!1,loadMoreText:"加载中...",shouchang:"../../static/aixin2.png",shouchang2:"../../static/aixin.png",enjoyBlean:!1,sheng:"",ling:"",startTime:0,endTime:0}},onLoad:function(e){var o=this;t.showLoading({title:"加载中..."}),this.sheng=e.sheng,this.ling=e.ling;var a=getCurrentPages(),i=a[a.length-1],n=i.route;console.log("router:",n),console.log("所以值：",e),t.setStorageSync("prGoodId",e.id);var d=e.id;this.UserId=e.oparid,t.setStorageSync("friendId",e.oparid),console.log("好友分享的parentid:",this.UserId);var r=t.getStorageSync("friendId");console.log("好友分享的parentid2:",r),console.log("UserId",this.UserId),t.setStorageSync("goodId",d);var c=e.userid;t.setStorageSync("shareparentid",c),console.log("分享的parentid:",c);var l=t.getStorageSync("weixiOpenId");if(""==l)t.setStorageSync("optId",1),t.hideLoading(),t.showModal({title:"提示",content:"用户不存在或用户没有登录",showCancel:!1,success:function(e){e.confirm&&t.navigateTo({url:"../applogin/applogin"})}});else{this.prGoodId=e.id;var u=t.getStorageSync("userId");this.UserId=e.userid?e.userid:u,console.log("UserId",this.UserId),t.setStorageSync("optId",1),this.likegoodList(),t.request({url:(0,s.requestip)()+"/thirdreturn/index/getgoodsdetail?goods_id="+e.id+"&openid="+l,method:"GET",data:{},success:function(e){console.log(e.data),o.data=e.data.goods_detail.goods_detail_response.goods_details[0],o.bannerdata=e.data.goods_detail.goods_detail_response.goods_details[0].goods_gallery_urls,o.dataurl=e.data.goods_url.goods_promotion_url_generate_response.goods_promotion_url_list[0].short_url,o.appid=e.data.goods_url.goods_promotion_url_generate_response.goods_promotion_url_list[0].we_app_info.app_id,o.pathges=e.data.goods_url.goods_promotion_url_generate_response.goods_promotion_url_list[0].we_app_info.page_path,o.zongscore=(o.data.avg_desc+o.data.avg_serv+o.data.avg_lgst)/300,o.zongscore=Math.floor(100*o.zongscore)/100,o.serpct=Math.floor(100*o.data.serv_pct*100)/100,o.descpct=Math.floor(100*o.data.desc_pct*100)/100,o.lgstpct=Math.floor(100*o.data.lgst_pct*100)/100,o.startTime=e.data.goods_detail.goods_detail_response.goods_details[0].coupon_start_time,o.endTime=e.data.goods_detail.goods_detail_response.goods_details[0].coupon_end_time,o.TimeDate(),1===e.data.is_favorite&&(o.enjoyBlean=!0),t.hideLoading(),o.loding=!0}})}this.borwer(e)},methods:{preimg:function(e){var o=e;console.log(o),t.previewImage({urls:this.bannerdata,current:o})},roll:function(){t.navigateToMiniProgram({appId:this.appid,path:this.pathges,success:function(t){console.log("success")}})},lookall:function(){this.look=!this.look},sharefriend:function(){},indexurl:function(){t.switchTab({url:"../index/index"}),console.log("1")},borwer:function(e){var o=t.getStorageSync("userId");t.request({url:(0,s.requestip)()+"/v2/customer/wx/setrecord",method:"GET",data:{user_id:o,product_id:e.id},success:function(t){console.log("浏览状态：",t)}})},likegoodList:function(){var e=this;this.messopid=t.getStorageSync("goodLike"),t.request({url:(0,s.requestip)()+"/thirdreturn/index/classgoods?class_id="+this.messopid+"&page=1&is_sub=0&prent_id="+this.messopid,method:"GET",data:{},success:function(t){console.log("相似商品数据：",t.data),e.dataState=t.data.goods_search_response.goods_list},fail:function(){},complete:function(){}})},enjoyList:function(){this.enjoyBlean=!this.enjoyBlean,1==this.enjoyBlean?this.addgood():this.removegood()},addgood:function(){var e=t.getStorageSync("userId");t.request({url:(0,s.requestip)()+"/v2/duoduoke/product/favorite?user_id="+e+"&product_id="+this.prGoodId,method:"GET",header:{"Content-Type":"application/x-www-form-urlencoded","access-token":t.getStorageSync("access-token"),"fecshop-uuid":t.getStorageSync("Fecshop-Uuid")},data:{},success:function(t){console.log("收藏结果:",t.data)},fail:function(){},complete:function(){}})},removegood:function(){var e=this;this.enjoyBlean=!0;var o=t.getStorageSync("userId");t.showModal({title:"提示",content:"您确定删除收藏商品吗",success:function(a){a.confirm?t.request({url:(0,s.requestip)()+"/v2/duoduoke/product/removefavorite?product_id="+e.prGoodId+"&user_id="+o,method:"GET",header:{"Content-Type":"application/x-www-form-urlencoded","access-token":t.getStorageSync("access-token"),"fecshop-uuid":t.getStorageSync("Fecshop-Uuid")},data:{},success:function(t){console.log("取消收藏结果:",t.data),e.enjoyBlean=!1},fail:function(){},complete:function(){}}):e.enjoyBlean=!0}})},TimeDate:function(){this.startTime=d(this.startTime).substr(5,5),this.endTime=d(this.endTime).substr(5,5)}},destroyed:function(){},onShow:function(){var e=this,o=t.getStorageSync("weixiOpenId"),a=t.getStorageSync("goodId");console.log("UserId",this.UserId),t.request({url:(0,s.requestip)()+"/thirdreturn/index/getgoodsdetail?goods_id="+a+"&openid="+o,method:"GET",data:{},success:function(o){t.hideLoading(),console.log(o.data),e.data=o.data.goods_detail.goods_detail_response.goods_details[0],e.bannerdata=o.data.goods_detail.goods_detail_response.goods_details[0].goods_gallery_urls,e.dataurl=o.data.goods_url.goods_promotion_url_generate_response.goods_promotion_url_list[0].short_url,e.appid=o.data.goods_url.goods_promotion_url_generate_response.goods_promotion_url_list[0].we_app_info.app_id,e.pathges=o.data.goods_url.goods_promotion_url_generate_response.goods_promotion_url_list[0].we_app_info.page_path,e.loding=!0,e.zongscore=(e.data.avg_desc+e.data.avg_serv+e.data.avg_lgst)/300,e.zongscore=Math.floor(100*e.zongscore)/100,e.serpct=Math.floor(100*e.data.serv_pct*100)/100,e.descpct=Math.floor(100*e.data.desc_pct*100)/100,e.lgstpct=Math.floor(100*e.data.lgst_pct*100)/100}})},onShareAppMessage:function(t){return"button"===t.from&&console.log(t),{title:this.data.goods_name+"优惠价"+this.data.coupon_discount/100+"元",path:"pages/productmess/productmess?id="+this.prGoodId+"&oparid="+this.UserId,imageUrl:this.bannerdata[0]}},onReachBottom:function(){var e=this;this.pages+=1,this.showloadMore=!0,t.request({url:(0,s.requestip)()+"/thirdreturn/index/classgoods?class_id="+this.messopid+"&page="+this.pages+"&is_sub=0&prent_id="+this.messopid,method:"GET",data:{},success:function(t){console.log("相似商品无限加载:",t.data);for(var o=0;o<t.data.goods_search_response.goods_list.length;o++)e.dataState.push(t.data.goods_search_response.goods_list[o]);e.showloadMore=!1},fail:function(){},complete:function(){}})}};e.default=r}).call(this,o("6e42")["default"])},1842:function(t,e,o){},"3f05":function(t,e,o){"use strict";o.r(e);var s=o("60b3"),a=o("d9d7");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);o("670e");var n=o("2877"),d=Object(n["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=d.exports},"60b3":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{directives:[{name:"show",rawName:"v-show",value:t.loding,expression:"loding"}],staticClass:"productmess"},[o("view",{staticClass:"goodlists"},[o("swiper",{attrs:{autoplay:!0,interval:3e3,duration:500,circular:"","indicator-dots":""}},t._l(t.bannerdata,function(e,s){return o("swiper-item",{key:s,attrs:{mpcomid:"0d5bb31a-0-"+s}},[o("image",{staticClass:"imgsty",attrs:{src:e,mode:"widthFix",eventid:"0d5bb31a-0-"+s},on:{click:function(o){t.preimg(e)}}})])}))],1),o("view",{staticClass:"jiage"},[o("view",{staticClass:"jflex"},[o("view",{staticClass:"jia"},[o("text",[t._v("到手价")]),o("text",[t._v("￥"+t._s((t.data.min_group_price-t.data.coupon_discount)/100))])]),o("view",{staticClass:"jiaee"},[t._v("返￥"+t._s(t.ling/100))])]),o("view",{staticClass:"jflexs"},[o("text",[t._v("天猫价 ￥"+t._s(t.data.min_normal_price/100))]),o("text",[t._v("销量"+t._s(t.data.sold_quantity))])])]),o("view",{staticClass:"goodname"},[o("text",[t._v(t._s(t.data.goods_name))])]),o("view",{staticClass:"roll",attrs:{eventid:"0d5bb31a-1"},on:{click:t.roll}},[o("view",{staticClass:"rollnum"},[o("text",[t._v("￥"+t._s(t.data.coupon_discount/100))]),o("view",{staticClass:"rolldata"},[t._m(0),o("view",{staticClass:"font22"},[o("text",[t._v("有效期"+t._s(t.startTime)+"- "+t._s(t.endTime))])])])]),o("text",[t._v("立即领卷")])]),o("view",{staticClass:"rollCount"}),o("view",{staticClass:"goodscore"},[o("view",{staticClass:"scoretitle"},[t._v("商品综合评分"),o("text",[t._v(t._s(t.zongscore))]),t._v("分,满分5分")]),o("view",{staticClass:"score"},[o("view",{staticClass:"scoremsg"},[o("view",[t._v("服务评分"),o("text",[t._v(t._s(t.data.avg_serv/100))])]),o("view",[t._v("描述评分"),o("text",[t._v(t._s(t.data.avg_desc/100))])]),o("view",[t._v("物流评分"),o("text",[t._v(t._s(t.data.avg_lgst/100))])])]),o("view",{staticClass:"scoremsg2"},[o("view",{staticClass:"beat"},[o("text",[t._v("击败")]),o("view",{staticClass:"beatbg"},[o("view",{style:{backgroundColor:"#FD4739",width:t.serpct+"%",height:"100%",borderRadius:"7px"}})])]),o("view",{staticClass:"beat"},[o("text",[t._v("击败")]),o("view",{staticClass:"beatbg"},[o("view",{style:{backgroundColor:"#FD4739",width:t.descpct+"%",height:"100%",borderRadius:"7px"}})])]),o("view",{staticClass:"beat"},[o("text",[t._v("击败")]),o("view",{staticClass:"beatbg"},[o("view",{style:{backgroundColor:"#FD4739",width:t.lgstpct+"%",height:"100%",borderRadius:"7px"}})])])]),t._m(1)])]),t._e(),o("view",{directives:[{name:"show",rawName:"v-show",value:t.look,expression:"look"}],staticClass:"userReviews"},[t._v("用户评论")]),o("view",{staticClass:"rollCount"}),t._m(2),o("view",{staticClass:"gooddesc"},[o("view",{staticClass:"goods_desc"},[o("text",[t._v(t._s(t.data.goods_desc))])]),t._l(t.bannerdata,function(e,s){return o("view",{key:s,staticClass:"descimg"},[o("image",{attrs:{src:e,mode:"widthFix",eventid:"0d5bb31a-3-"+s},on:{click:function(o){t.preimg(e)}}})])})],2),o("view",{staticClass:"bottombar"},[o("view",{staticClass:"indexbar"},[o("view",{staticClass:"enjoy",attrs:{eventid:"0d5bb31a-4"},on:{click:t.indexurl}},[o("image",{attrs:{src:"../../static/shouye.png",mode:"widthFix"}}),o("text",[t._v("首页")])]),o("view",{staticClass:"enjoy",attrs:{eventid:"0d5bb31a-5"},on:{click:t.enjoyList}},[o("image",{attrs:{src:t.enjoyBlean?t.shouchang2:t.shouchang,mode:"widthFix"}}),o("text",[t._v("收藏")])])]),o("view",{staticClass:"sharemess",attrs:{eventid:"0d5bb31a-6"},on:{click:t.sharefriend}},[o("button",{staticClass:"buttonfriend",attrs:{"open-type":"share",id:"1"}},[o("text",[t._v("分享升级")]),o("text",[t._v("返利:￥"+t._s(t.sheng/100))])])],1),o("view",{staticClass:"sharemess",attrs:{eventid:"0d5bb31a-7"},on:{click:t.roll}},[o("text",[t._v("领￥"+t._s(t.data.coupon_discount/100)+"劵购买")]),o("text",[t._v("返利:￥"+t._s(t.ling/100))])])]),o("view",{staticClass:"rollCount"}),o("view",{staticClass:"likeGood"},[t._m(3),o("good-flex",{attrs:{data:t.dataState,flexblean:t.flexblean,mpcomid:"0d5bb31a-1"}})],1),t.showloadMore?o("load-more",{attrs:{status:"加载中..."===t.loadMoreText?"loading":"",mpcomid:"0d5bb31a-2"}}):t._e()],1)},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",[o("text",[t._v("优惠卷")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"scoremsg3"},[o("text",[t._v("同类店铺")]),o("text",[t._v("同类店铺")]),o("text",[t._v("同类店铺")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"reviews"},[o("text",[t._v("商品详情")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"titles"},[o("text",[t._v("推荐商品")])])}];o.d(e,"a",function(){return s}),o.d(e,"b",function(){return a})},"670e":function(t,e,o){"use strict";var s=o("1842"),a=o.n(s);a.a},d9d7:function(t,e,o){"use strict";o.r(e);var s=o("061d"),a=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);e["default"]=a.a},dfb2:function(t,e,o){"use strict";o("12e0");var s=i(o("b0ce")),a=i(o("3f05"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))}},[["dfb2","common/runtime","common/vendor"]]]);